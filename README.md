# LinguaTrack

LinguaTrack ‚Äî —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è –∏–Ω–æ—Å—Ç—Ä–∞–Ω–Ω—ã—Ö —Å–ª–æ–≤ —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª—å–Ω—ã–º –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ–º, –æ–∑–≤—É—á–∫–æ–π –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π —Å Telegram-–±–æ—Ç–æ–º.

## –û–ø–∏—Å–∞–Ω–∏–µ

LinguaTrack ‚Äî —ç—Ç–æ MVP-–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫ —Å–ª–æ–≤, –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å Telegram-–±–æ—Ç–æ–º –¥–ª—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –∏ —Ç–µ—Å—Ç–æ–≤. –ü—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –Ω–∞ Django, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –ø—Ä–∏–≤—è–∑–∫—É Telegram —á–µ—Ä–µ–∑ magic-—Å—Å—ã–ª–∫—É –∏ QR-–∫–æ–¥, –∞ —Ç–∞–∫–∂–µ —Ä–∞—Å—à–∏—Ä—è–µ–º—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –¥–ª—è –±—É–¥—É—â–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π.

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –ø—Ä–∏–≤—è–∑–∫–æ–π Telegram (magic-—Å—Å—ã–ª–∫–∞ –∏ QR-–∫–æ–¥)
- ‚úÖ CRUD –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫ (—Å–æ–∑–¥–∞–Ω–∏–µ, –ø—Ä–æ—Å–º–æ—Ç—Ä, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ)
- ‚úÖ –ò–Ω—Ç–µ—Ä–≤–∞–ª—å–Ω–æ–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ (–∞–ª–≥–æ—Ä–∏—Ç–º SM-2)
- ‚úÖ –ò–º–ø–æ—Ä—Ç –∫–∞—Ä—Ç–æ—á–µ–∫ –∏–∑ CSV-—Ñ–∞–π–ª–∞
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫ –ø–æ —É—Ä–æ–≤–Ω—é —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
- ‚úÖ –†—É—á–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –¥–∞—Ç—ã —Å–ª–µ–¥—É—é—â–µ–≥–æ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π UI —Å –µ–¥–∏–Ω—ã–º –¥–∏–∑–∞–π–Ω–æ–º (Tailwind CSS)
- ‚úÖ –û–∑–≤—É—á–∫–∞ —Å–ª–æ–≤ —á–µ—Ä–µ–∑ Yandex SpeechKit (–∫—ç—à, fallback, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫)
- ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –∫–∞—Ä—Ç–æ—á–µ–∫ –≤ CSV
- ‚úÖ Telegram-–±–æ—Ç: /start, /help, /cards, /today, /progress, /say, /test, /test_mc
- ‚úÖ –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–µ–∫ –≤ –±–æ—Ç–µ (–∑–Ω–∞—é/–Ω–µ –∑–Ω–∞—é –∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä)
- ‚úÖ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–∏ (Celery + Redis)
- ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—é (–∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤ /test –∏ /test_mc)
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤ –±–æ—Ç–∞
- ‚úÖ –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- ‚úÖ –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏ –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–æ–º
- ‚úÖ –†–µ–∂–∏–º –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è –≤ –æ–±–µ —Å—Ç–æ—Ä–æ–Ω—ã (—Å–ª–æ–≤–æ‚Üí–ø–µ—Ä–µ–≤–æ–¥ –∏ –ø–µ—Ä–µ–≤–æ–¥‚Üí—Å–ª–æ–≤–æ)

## üîÑ –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ / Roadmap
- [ ] –†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (—Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ, –≤–≤–æ–¥ —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã)
- [ ] –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ (unit/integration)
- [ ] –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ (–≥—Ä–∞—Ñ–∏–∫–∏ matplotlib/plotly, –¥–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)
- [x] –î–µ–ø–ª–æ–π –Ω–∞ production —Å–µ—Ä–≤–µ—Ä (–≥–æ—Ç–æ–≤–æ –≤ –∫–∞—Ç–∞–ª–æ–≥–µ `deploy/`)

## –ê–ª–≥–æ—Ä–∏—Ç–º—ã –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

### üîÑ –ê–ª–≥–æ—Ä–∏—Ç–º –∏–Ω—Ç–µ—Ä–≤–∞–ª—å–Ω–æ–≥–æ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è SM-2

**–ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã:**
1. **–û—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –æ—Ç–≤–µ—Ç–∞** –ø–æ —à–∫–∞–ª–µ 0-5:
   - 0-2: –ù–µ –∑–Ω–∞–ª (–ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 1 –¥–µ–Ω—å)
   - 3-5: –ó–Ω–∞–ª (—É–≤–µ–ª–∏—á–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞)

2. **–†–∞—Å—á–µ—Ç –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞:**
   - –ü–µ—Ä–≤–æ–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ: 1 –¥–µ–Ω—å
   - –í—Ç–æ—Ä–æ–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ: 6 –¥–Ω–µ–π
   - –ü–æ—Å–ª–µ–¥—É—é—â–∏–µ: `–∏–Ω—Ç–µ—Ä–≤–∞–ª √ó EF` (—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å)

3. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (EF):**
   ```
   EF = EF + (0.1 - (5 - –∫–∞—á–µ—Å—Ç–≤–æ) √ó (0.08 + (5 - –∫–∞—á–µ—Å—Ç–≤–æ) √ó 0.02))
   EF = max(1.3, EF)  // –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
   ```

4. **–°–ª–µ–¥—É—é—â–∞—è –¥–∞—Ç–∞ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è:**
   ```
   next_review = today + interval_days
   ```

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤ –∫–æ–¥–µ:**
```python
def update_schedule(schedule, quality):
    if quality < 3:
        schedule.repetition = 0
        schedule.interval = 1
    else:
        if schedule.repetition == 0:
            schedule.interval = 1
        elif schedule.repetition == 1:
            schedule.interval = 6
        else:
            schedule.interval = int(schedule.interval * schedule.ef)
        schedule.repetition += 1
    
    ef = schedule.ef + (0.1 - (5 - quality) * (0.08 + (5 - quality) * 0.02))
    schedule.ef = max(1.3, ef)
    schedule.next_review = date.today() + timedelta(days=schedule.interval)
    schedule.last_result = quality >= 3
```

### üéµ –ê–ª–≥–æ—Ä–∏—Ç–º –æ–∑–≤—É—á–∫–∏ —á–µ—Ä–µ–∑ Yandex SpeechKit

**–ü—Ä–æ—Ü–µ—Å—Å —Å–∏–Ω—Ç–µ–∑–∞ —Ä–µ—á–∏:**
1. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞:** —ç–≤—Ä–∏—Å—Ç–∏–∫–∞ –ø–æ –Ω–∞–ª–∏—á–∏—é –∫–∏—Ä–∏–ª–ª–∏—Ü—ã
2. **–í—ã–±–æ—Ä –≥–æ–ª–æ—Å–∞:** –º–∞–ø–ø–∏–Ω–≥ –ø–æ —è–∑—ã–∫—É (en‚Üíjane, ru‚Üíalena)
3. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:** SHA256 —Ö–µ—à –æ—Ç `—Ç–µ–∫—Å—Ç|—è–∑—ã–∫|–≥–æ–ª–æ—Å`
4. **Retry –ª–æ–≥–∏–∫–∞:** —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è 5xx –æ—à–∏–±–æ–∫
5. **Fallback:** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –≥–æ–ª–æ—Å–∞ –ø—Ä–∏ –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

**–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:**
- 401: –ù–µ–≤–µ—Ä–Ω—ã–π API –∫–ª—é—á
- 403: –î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω
- 404: –ù–µ–≤–µ—Ä–Ω—ã–π folder_id
- 429: –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤
- 5xx: Retry —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π

### ü§ñ –ê–ª–≥–æ—Ä–∏—Ç–º Telegram-–±–æ—Ç–∞

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
1. **FSM (Finite State Machine):** —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
2. **–û—á–µ—Ä–µ–¥—å –∫–∞—Ä—Ç–æ—á–µ–∫:** –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤
3. **–û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å:** –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
4. **HTTP endpoint:** –ø—Ä–∏–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ—Ç Celery

**–ö–æ–º–∞–Ω–¥—ã –∏ –ª–æ–≥–∏–∫–∞:**
- `/test`: –û—á–µ—Ä–µ–¥—å –∫–∞—Ä—Ç–æ—á–µ–∫ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è, –æ—Ü–µ–Ω–∫–∞ 0-5
- `/test_mc`: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä, 4 –≤–∞—Ä–∏–∞–Ω—Ç–∞ –æ—Ç–≤–µ—Ç–∞
- `/today`: –ö–∞—Ä—Ç–æ—á–∫–∏ –Ω–∞ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ —Å –¥–∞—Ç–∞–º–∏
- `/progress`: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å –∞–ª–≥–æ—Ä–∏—Ç–º–æ–º –ø–æ–¥—Å—á–µ—Ç–∞

### üìä –ê–ª–≥–æ—Ä–∏—Ç–º –ø–æ–¥—Å—á–µ—Ç–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

**–ú–µ—Ç—Ä–∏–∫–∏:**
1. **–í—Å–µ–≥–æ –∫–∞—Ä—Ç–æ—á–µ–∫:** `Card.objects.filter(user=user).count()`
2. **–í—ã—É—á–µ–Ω–æ:** `Schedule.objects.filter(card__user=user, interval__gte=21).count()`
3. **–û—à–∏–±–æ–∫:** `Schedule.objects.filter(card__user=user, last_result=False).count()`
4. **–ü–æ–≤—Ç–æ—Ä–µ–Ω–∏–π:** `Schedule.objects.filter(card__user=user).aggregate(Sum('repetition'))`
5. **–ü—Ä–æ—Ü–µ–Ω—Ç:** `(–≤—ã—É—á–µ–Ω–æ / –≤—Å–µ–≥–æ) √ó 100`

### üîÑ –ê–ª–≥–æ—Ä–∏—Ç–º –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π (Celery)

**–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫:**
1. **–ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –∑–∞–¥–∞—á–∞:** –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ 8:00 —É—Ç—Ä–∞
2. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è:** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è
3. **HTTP —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ:** POST –Ω–∞ `/notify` endpoint –±–æ—Ç–∞
4. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** –≤—Å–µ —Å–æ–±—ã—Ç–∏—è –≤ BotLog

### üéØ –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π

**–õ–æ–≥–∏–∫–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π:**
1. **–ö–∞—Ä—Ç–æ—á–∫–∏ —Å –Ω–∏–∑–∫–∏–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º:** `interval < 7 –¥–Ω–µ–π`
2. **–ö–∞—Ä—Ç–æ—á–∫–∏ —Å –æ—à–∏–±–∫–∞–º–∏:** `last_result = False`
3. **–ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è:** –ø–æ –¥–∞—Ç–µ —Å–ª–µ–¥—É—é—â–µ–≥–æ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è
4. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:** –≤ –∫–æ–º–∞–Ω–¥—ã `/test` –∏ `/test_mc`

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
‚îú‚îÄ‚îÄ lingua_track/         # –û—Å–Ω–æ–≤–Ω–æ–π Django-–ø—Ä–æ–µ–∫—Ç
‚îÇ   ‚îú‚îÄ‚îÄ celery.py        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Celery
‚îÇ   ‚îú‚îÄ‚îÄ settings.py      # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞
‚îÇ   ‚îî‚îÄ‚îÄ urls.py          # –ì–ª–∞–≤–Ω—ã–π —Ä–æ—É—Ç–µ—Ä
‚îú‚îÄ‚îÄ users/                # –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ models.py        # –ö–∞—Å—Ç–æ–º–Ω–∞—è –º–æ–¥–µ–ª—å User
‚îÇ   ‚îú‚îÄ‚îÄ views.py         # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, –ø—Ä–æ—Ñ–∏–ª—å, –ø—Ä–∏–≤—è–∑–∫–∞ Telegram
‚îÇ   ‚îî‚îÄ‚îÄ forms.py         # –§–æ—Ä–º—ã —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ cards/                # –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–µ–∫
‚îÇ   ‚îú‚îÄ‚îÄ models.py        # Card, Schedule (SM-2)
‚îÇ   ‚îú‚îÄ‚îÄ views.py         # CRUD, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ sm2.py           # –ê–ª–≥–æ—Ä–∏—Ç–º –∏–Ω—Ç–µ—Ä–≤–∞–ª—å–Ω–æ–≥–æ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ speechkit.py     # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Yandex SpeechKit
‚îÇ   ‚îú‚îÄ‚îÄ tasks.py         # Celery –∑–∞–¥–∞—á–∏
‚îÇ   ‚îî‚îÄ‚îÄ forms.py         # –§–æ—Ä–º—ã –∫–∞—Ä—Ç–æ—á–µ–∫ —Å –¥–∞—Ç–æ–π –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è
‚îú‚îÄ‚îÄ bot_api/              # API –¥–ª—è Telegram-–±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ models.py        # BotLog –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ views.py         # REST API endpoints
‚îÇ   ‚îî‚îÄ‚îÄ admin.py         # –ê–¥–º–∏–Ω–∫–∞ –¥–ª—è –ª–æ–≥–æ–≤
‚îú‚îÄ‚îÄ t_bot/                # Telegram-–±–æ—Ç (aiogram)
‚îÇ   ‚îú‚îÄ‚îÄ config.py        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ api_client.py    # –ö–ª–∏–µ–Ω—Ç –¥–ª—è Django API
‚îÇ   ‚îú‚îÄ‚îÄ handlers.py      # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥
‚îÇ   ‚îú‚îÄ‚îÄ bot.py           # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –±–æ—Ç–∞
‚îÇ   ‚îî‚îÄ‚îÄ run.py           # –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞ —Å HTTP endpoint
‚îú‚îÄ‚îÄ templates/            # –®–∞–±–ª–æ–Ω—ã (–∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω)
‚îÇ   ‚îú‚îÄ‚îÄ base.html        # –ë–∞–∑–æ–≤—ã–π —à–∞–±–ª–æ–Ω
‚îÇ   ‚îú‚îÄ‚îÄ users/           # –ü—Ä–æ—Ñ–∏–ª—å, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –≤—Ö–æ–¥
‚îÇ   ‚îî‚îÄ‚îÄ cards/           # –°–ø–∏—Å–æ–∫, —Ñ–æ—Ä–º—ã, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îú‚îÄ‚îÄ docs/                 # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ requirements.txt      # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ README.md             # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ manage.py
‚îî‚îÄ‚îÄ ...
```

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
   ```bash
   git clone https://github.com/RoKols2017/lingua_track.git
   cd lingua_track
   ```

2. **–°–æ–∑–¥–∞–π—Ç–µ –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:**
   ```bash
   python -m venv venv
   # Windows:
   venv\Scripts\activate
   # Linux/Mac:
   source venv/bin/activate
   ```

3. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
   ```bash
   pip install -r requirements.txt
   ```

4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
   –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –Ω–∞ –æ—Å–Ω–æ–≤–µ `.env_example`:
   ```bash
   # –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —à–∞–±–ª–æ–Ω
   cp .env_example .env
   
   # –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env –∏ –∑–∞–º–µ–Ω–∏—Ç–µ –∑–∞–≥–ª—É—à–∫–∏ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:
   # - YANDEX_SPEECHKIT_API_KEY ‚Äî –ø–æ–ª—É—á–∏—Ç–µ –≤ Yandex Cloud Console
   # - YANDEX_SPEECHKIT_FOLDER_ID ‚Äî ID –ø–∞–ø–∫–∏ –≤ Yandex Cloud
   # - TELEGRAM_BOT_TOKEN ‚Äî –ø–æ–ª—É—á–∏—Ç–µ —É @BotFather –≤ Telegram
   ```

5. **–ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏:**
   ```bash
   python manage.py migrate
   ```

6. **–°–æ–∑–¥–∞–π—Ç–µ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
   ```bash
   python manage.py createsuperuser
   ```

7. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã:**
   ```bash
   # –¢–µ—Ä–º–∏–Ω–∞–ª 1: Django
   python manage.py runserver
   
   # –¢–µ—Ä–º–∏–Ω–∞–ª 2: Redis (–µ—Å–ª–∏ –Ω–µ –∑–∞–ø—É—â–µ–Ω)
   redis-server
   
   # –¢–µ—Ä–º–∏–Ω–∞–ª 3: Telegram-–±–æ—Ç (—Å HTTP endpoint –Ω–∞ –ø–æ—Ä—Ç—É 8080)
   python t_bot/run.py
   
   # –¢–µ—Ä–º–∏–Ω–∞–ª 4: Celery worker
   celery -A lingua_track worker -l info
   
   # –¢–µ—Ä–º–∏–Ω–∞–ª 5: Celery beat
   celery -A lingua_track beat -l info
   ```

8. **–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:**
   - http://127.0.0.1:8000/ ‚Äî –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
   - http://127.0.0.1:8000/admin/ ‚Äî –∞–¥–º–∏–Ω–∫–∞ Django

## üöÄ –î–µ–ø–ª–æ–π –Ω–∞ production —Å–µ—Ä–≤–µ—Ä

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

–î–ª—è –¥–µ–ø–ª–æ—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä Ubuntu —Å –¥–æ–º–µ–Ω–æ–º `l_track.opencove.ru`:

```bash
# 1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä
git clone https://github.com/RoKols2017/lingua_track.git
cd lingua_track/deploy

# 2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
cp env.production.example .env
nano .env  # –∑–∞–º–µ–Ω–∏—Ç–µ –∑–∞–≥–ª—É—à–∫–∏ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è

# 3. –ü–æ–ª—É—á–∏—Ç–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã (Let's Encrypt)
sudo apt install certbot -y
sudo certbot certonly --standalone -d l_track.opencove.ru
sudo mkdir -p ssl
sudo cp /etc/letsencrypt/live/l_track.opencove.ru/fullchain.pem ssl/l_track.opencove.ru.crt
sudo cp /etc/letsencrypt/live/l_track.opencove.ru/privkey.pem ssl/l_track.opencove.ru.key
sudo chown -R $USER:$USER ssl/

# 4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
chmod +x deploy.sh
./deploy.sh start
```

### –ß—Ç–æ –≤–∫–ª—é—á–∞–µ—Ç –¥–µ–ø–ª–æ–π

**üê≥ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:**
- **PostgreSQL 15** ‚Äî –æ—Å–Ω–æ–≤–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **Redis 7** ‚Äî –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á Celery
- **Django + Gunicorn** ‚Äî –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (3 –≤–æ—Ä–∫–µ—Ä–∞)
- **Telegram-–±–æ—Ç** ‚Äî —Å HTTP endpoint –Ω–∞ –ø–æ—Ä—Ç—É 8080
- **Celery Worker + Beat** ‚Äî —Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ –∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
- **Nginx** ‚Äî –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä —Å SSL/HTTPS

**üîß –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è:**
- **–°–∫—Ä–∏–ø—Ç –¥–µ–ø–ª–æ—è** `deploy.sh` —Å –∫–æ–º–∞–Ω–¥–∞–º–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏** –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ –º–µ–¥–∏–∞ —Ñ–∞–π–ª–æ–≤
- **Health checks** –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫** –ø—Ä–∏ —Å–±–æ—è—Ö

**üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
- **–õ–æ–≥–∏** –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ —á–µ—Ä–µ–∑ `./deploy.sh logs`
- **–°—Ç–∞—Ç—É—Å** –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ —á–µ—Ä–µ–∑ `./deploy.sh status`
- **–ú–µ—Ç—Ä–∏–∫–∏** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
./deploy.sh start

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
./deploy.sh stop

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
./deploy.sh restart

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
./deploy.sh logs

# –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤
./deploy.sh status

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
./deploy.sh update

# –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
./deploy.sh backup

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±—ç–∫–∞–ø–∞
./deploy.sh restore backups/20231201_120000

# –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ (–û–°–¢–û–†–û–ñ–ù–û!)
./deploy.sh cleanup
```

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É

**–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ:**
- Ubuntu 20.04 LTS
- 2 GB RAM
- 1 CPU —è–¥—Ä–æ
- 10 GB –¥–∏—Å–∫–∞

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ:**
- Ubuntu 22.04 LTS
- 4 GB RAM
- 2 CPU —è–¥—Ä–∞
- 20 GB SSD

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **SSL/HTTPS** —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- **–ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã** —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏
- **–°–ª–æ–∂–Ω—ã–µ –ø–∞—Ä–æ–ª–∏** –¥–ª—è –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö
- **–§–∞–π—Ä–≤–æ–ª** —Å –æ—Ç–∫—Ä—ã—Ç—ã–º–∏ –ø–æ—Ä—Ç–∞–º–∏ 80, 443, 22
- **–†–µ–≥—É–ª—è—Ä–Ω—ã–µ –±—ç–∫–∞–ø—ã** –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### –†–µ–∑—É–ª—å—Ç–∞—Ç –¥–µ–ø–ª–æ—è

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ:
- üåê **–°–∞–π—Ç:** https://l_track.opencove.ru
- üîß **–ê–¥–º–∏–Ω–∫–∞:** https://l_track.opencove.ru/admin/
- üìä **Health check:** https://l_track.opencove.ru/health/
- ü§ñ **Telegram-–±–æ—Ç:** —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –≤–∞—à–∏–º —Ç–æ–∫–µ–Ω–æ–º

**üìñ –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** —Å–º. `deploy/README.md`

## –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### –ö–∞—Ä—Ç–æ—á–∫–∏
- **–°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–µ–∫** —Å –ø–æ–ª—è–º–∏: —Å–ª–æ–≤–æ, –ø–µ—Ä–µ–≤–æ–¥, –ø—Ä–∏–º–µ—Ä, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π, —É—Ä–æ–≤–µ–Ω—å
- **–ò–º–ø–æ—Ä—Ç –∏–∑ CSV** ‚Äî –º–∞—Å—Å–æ–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ä—Ç–æ—á–µ–∫ –∏–∑ —Ñ–∞–π–ª–∞
- **–≠–∫—Å–ø–æ—Ä—Ç –≤ CSV** ‚Äî –≤—ã–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö –∫–∞—Ä—Ç–æ—á–µ–∫
- **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è** –ø–æ —É—Ä–æ–≤–Ω—é —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ (–Ω–∞—á–∞–ª—å–Ω—ã–π, —Å—Ä–µ–¥–Ω–∏–π, –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π)
- **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ** –∫–∞—Ä—Ç–æ—á–µ–∫
- **–†—É—á–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –¥–∞—Ç—ã –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è** —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –ò–Ω—Ç–µ—Ä–≤–∞–ª—å–Ω–æ–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ (SM-2)
- **–ê–ª–≥–æ—Ä–∏—Ç–º SM-2** ‚Äî –Ω–∞—É—á–Ω–æ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–π –º–µ—Ç–æ–¥ –∑–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
- **–û—Ü–µ–Ω–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤** –ø–æ —à–∫–∞–ª–µ 0-5 (0 ‚Äî –Ω–µ –∑–Ω–∞–ª, 5 ‚Äî –∏–¥–µ–∞–ª—å–Ω–æ)
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** —Å–ª–µ–¥—É—é—â–µ–≥–æ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è
- **–†–µ–∂–∏–º –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è** –≤ –æ–±–µ —Å—Ç–æ—Ä–æ–Ω—ã (—Å–ª–æ–≤–æ‚Üí–ø–µ—Ä–µ–≤–æ–¥ –∏ –ø–µ—Ä–µ–≤–æ–¥‚Üí—Å–ª–æ–≤–æ)
- **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:** –≤—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞, –æ—Ü–µ–Ω–∫–∞, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –≤—Ö–æ–¥** —Å –∫–∞—Å—Ç–æ–º–Ω–æ–π –º–æ–¥–µ–ª—å—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–ü—Ä–æ—Ñ–∏–ª—å** —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø—Ä–∏–≤—è–∑–∫–µ Telegram
- **Magic-—Å—Å—ã–ª–∫–∞ –∏ QR-–∫–æ–¥** –¥–ª—è –ø—Ä–∏–≤—è–∑–∫–∏ Telegram-–∞–∫–∫–∞—É–Ω—Ç–∞
- **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

### Telegram-–±–æ—Ç
- **–ü—Ä–∏–≤—è–∑–∫–∞ –∞–∫–∫–∞—É–Ω—Ç–∞** —á–µ—Ä–µ–∑ magic-—Å—Å—ã–ª–∫—É –∏–ª–∏ QR-–∫–æ–¥
- **–ö–æ–º–∞–Ω–¥—ã:** /start, /help, /cards, /today, /progress, /say, /test, /test_mc
- **–û–∑–≤—É—á–∫–∞ —Å–ª–æ–≤** —á–µ—Ä–µ–∑ /say (—Ç–æ–ª—å–∫–æ —Å–ª–æ–≤–∞ –∏–∑ –∫–∞—Ä—Ç–æ—á–µ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
- **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** —Å –∫–Ω–æ–ø–∫–∞–º–∏ (–∑–Ω–∞—é/–Ω–µ –∑–Ω–∞—é –∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä)
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- **HTTP endpoint /notify** –¥–ª—è –ø—Ä–∏—ë–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ—Ç Celery

### –û–∑–≤—É—á–∫–∞ —Å–ª–æ–≤ —á–µ—Ä–µ–∑ Yandex SpeechKit
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** –∞—É–¥–∏–æ—Ñ–∞–π–ª–æ–≤, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –ø–æ TTL
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** (–≤–∞–ª–∏–¥–∞—Ü–∏—è, retry, fallback, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)
- **–ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞** –ø–æ –Ω–∞–ª–∏—á–∏—é –∫–∏—Ä–∏–ª–ª–∏—Ü—ã
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—ç—à–µ–º**: –∫–æ–º–∞–Ω–¥–∞ `python manage.py clean_audio_cache`

### –ò–º–ø–æ—Ä—Ç/—ç–∫—Å–ø–æ—Ä—Ç –∫–∞—Ä—Ç–æ—á–µ–∫
- **–ò–º–ø–æ—Ä—Ç** –∏–∑ CSV (UTF-8, word, translation, example, comment, level)
- **–≠–∫—Å–ø–æ—Ä—Ç** –≤ CSV
- **–í–∞–ª–∏–¥–∞—Ü–∏—è** –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–µ–π –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ

### –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
- **–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è** —á–µ—Ä–µ–∑ Celery + Redis
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏** –ø–æ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—é –∫–∞—Ä—Ç–æ—á–µ–∫ —Å –Ω–∏–∑–∫–∏–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º (–∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤ /test –∏ /test_mc)
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** —Å Telegram-–±–æ—Ç–æ–º —á–µ—Ä–µ–∑ HTTP endpoint

### –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç** –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–∑–≤—É—á–∫–∏: `python test_speechkit.py`
- **–õ–æ–≥–∏** –æ—à–∏–±–æ–∫ –∏ —Å–æ–±—ã—Ç–∏–π –≤ BotLog
- **–ö–æ–º–∞–Ω–¥–∞ –æ—á–∏—Å—Ç–∫–∏ –∫—ç—à–∞**: `python manage.py clean_audio_cache --dry-run`

## –ö–æ–º–∞–Ω–¥—ã Telegram-–±–æ—Ç–∞

- <b>/start</b> ‚Äî –Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É, –ø—Ä–∏–≤—è–∑–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç —á–µ—Ä–µ–∑ magic-—Å—Å—ã–ª–∫—É
- <b>/help</b> ‚Äî —Å–ø—Ä–∞–≤–∫–∞ –ø–æ –≤—Å–µ–º –∫–æ–º–∞–Ω–¥–∞–º
- <b>/cards</b> ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∫–∞—Ä—Ç–æ—á–∫–∏ (–ø–µ—Ä–≤—ã–µ 10)
- <b>/today</b> ‚Äî –∫–∞—Ä—Ç–æ—á–∫–∏ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è –¥–ª—è –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è
- <b>/progress</b> ‚Äî –º–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- <b>/say —Å–ª–æ–≤–æ</b> ‚Äî –æ–∑–≤—É—á–∏—Ç—å —Å–ª–æ–≤–æ (—Ç–æ–ª—å–∫–æ –∏–∑ —Å–≤–æ–∏—Ö –∫–∞—Ä—Ç–æ—á–µ–∫)
- <b>/test</b> ‚Äî –ø—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç –ø–æ –∫–∞—Ä—Ç–æ—á–∫–∞–º –Ω–∞ —Å–µ–≥–æ–¥–Ω—è (–∑–Ω–∞—é/–Ω–µ –∑–Ω–∞—é)
- <b>/test_mc</b> ‚Äî –ø—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º –≤—ã–±–æ—Ä–æ–º (multiple choice)

<b>–ü—Ä–∏–≤—è–∑–∫–∞ –∞–∫–∫–∞—É–Ω—Ç–∞:</b>
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ magic-—Å—Å—ã–ª–∫—É –∏–ª–∏ QR-–∫–æ–¥ –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è –Ω–∞ —Å–∞–π—Ç–µ
- –ü–æ—Å–ª–µ –ø—Ä–∏–≤—è–∑–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã

## –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ (Django admin)

- –í –∞–¥–º–∏–Ω–∫–µ –¥–æ—Å—Ç—É–ø–Ω—ã:
  - **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏** (—Å Telegram ID –∏ —Ç–æ–∫–µ–Ω–æ–º –ø—Ä–∏–≤—è–∑–∫–∏)
  - **–ö–∞—Ä—Ç–æ—á–∫–∏** (Card) ‚Äî –ø–æ–∏—Å–∫, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è, –ø—Ä–æ—Å–º–æ—Ç—Ä, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
  - **–†–∞—Å–ø–∏—Å–∞–Ω–∏—è –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π** (Schedule) ‚Äî –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã, –¥–∞—Ç—ã, —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å SM-2, —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è
  - **–õ–æ–≥–∏ –±–æ—Ç–∞** (BotLog) ‚Äî –∑–∞–ø—Ä–æ—Å—ã, –æ—Ç–≤–µ—Ç—ã, –æ—à–∏–±–∫–∏, —Ç–∏–ø—ã —Å–æ–±—ã—Ç–∏–π
- –ú–æ–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã, –¥–∞—Ç—ã –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã SM-2 –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏–ª–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- –ö–∞—Å—Ç–æ–º–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –∫—ç—à–∞ –∞—É–¥–∏–æ—Ñ–∞–π–ª–æ–≤:
  ```bash
  python manage.py clean_audio_cache [--force] [--dry-run]
  ```

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ê–ª–≥–æ—Ä–∏—Ç–º SM-2 (SuperMemo 2)
- **–û—Å–Ω–æ–≤–∞:** –Ω–∞—É—á–Ω–æ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–π –º–µ—Ç–æ–¥ –∏–Ω—Ç–µ—Ä–≤–∞–ª—å–Ω–æ–≥–æ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è
- **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:** –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç EF (1.3-2.5)
- **–ò–Ω—Ç–µ—Ä–≤–∞–ª—ã:** —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π —Ä–æ—Å—Ç –ø—Ä–∏ —É—Å–ø–µ—à–Ω—ã—Ö –æ—Ç–≤–µ—Ç–∞—Ö
- **–°–±—Ä–æ—Å:** –≤–æ–∑–≤—Ä–∞—Ç –∫ –∏–Ω—Ç–µ—Ä–≤–∞–ª—É 1 –¥–µ–Ω—å –ø—Ä–∏ –Ω–µ—É–¥–∞—á–Ω—ã—Ö –æ—Ç–≤–µ—Ç–∞—Ö

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—É–¥–∏–æ
- **–•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ:** SHA256 –æ—Ç `—Ç–µ–∫—Å—Ç|—è–∑—ã–∫|–≥–æ–ª–æ—Å`
- **TTL:** –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ–µ –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ –∫—ç—à–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 7 –¥–Ω–µ–π)
- **–í–∞–ª–∏–¥–∞—Ü–∏—è:** –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞ –∏ —Ñ–æ—Ä–º–∞—Ç–∞ OGG
- **–û—á–∏—Å—Ç–∫–∞:** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏ —Ä—É—á–Ω–∞—è —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É

### FSM –≤ Telegram-–±–æ—Ç–µ
- **–°–æ—Å—Ç–æ—è–Ω–∏—è:** –æ–∂–∏–¥–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ –Ω–∞ —Ç–µ—Å—Ç
- **–î–∞–Ω–Ω—ã–µ:** –æ—á–µ—Ä–µ–¥—å –∫–∞—Ä—Ç–æ—á–µ–∫, —Ç–µ–∫—É—â–∏–π –∏–Ω–¥–µ–∫—Å, —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
- **–ü–µ—Ä–µ—Ö–æ–¥—ã:** –æ—Ç–≤–µ—Ç ‚Üí —Å–ª–µ–¥—É—é—â–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ –∏–ª–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ

### HTTP endpoint –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- **–ü—Ä–æ—Ç–æ–∫–æ–ª:** aiohttp web-—Å–µ—Ä–≤–µ—Ä (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å –±–æ—Ç–æ–º)
- **–ú–∞—Ä—à—Ä—É—Ç:** POST /notify
- **–î–∞–Ω–Ω—ã–µ:** telegram_id, message
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:** –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ `python t_bot/run.py` (–ø–æ—Ä—Ç 8080)

### –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
- **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:** —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏ –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ "–ú–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å"
- **–ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:** –≥—Ä–∞—Ñ–∏–∫–∏ matplotlib/plotly, –¥–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –¥–Ω—è–º/–Ω–µ–¥–µ–ª—è–º

## –õ–∏—Ü–µ–Ω–∑–∏—è
MIT 