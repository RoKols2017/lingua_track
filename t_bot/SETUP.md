# Настройка Telegram-бота

## Шаг 1: Создание бота

1. Откройте Telegram и найдите @BotFather
2. Отправьте команду `/newbot`
3. Введите имя бота (например, "LinguaTrack Bot")
4. Введите username бота (например, "linguatrack_bot")
5. Скопируйте полученный токен

## Шаг 2: Настройка переменных окружения

1. Создайте файл `.env` в корне проекта (если его нет)
2. Добавьте токен бота:
   ```
   TELEGRAM_BOT_TOKEN=your_bot_token_here
   ```

## Шаг 3: Обновление magic-ссылки

1. Откройте файл `users/views.py`
2. Найдите строку с `YOUR_BOT_USERNAME`
3. Замените на реальное имя вашего бота:
   ```python
   telegram_link = f'https://t.me/linguatrack_bot?start={token}'
   ```

## Шаг 4: Запуск Django-сервера

```bash
python manage.py runserver
```

## Шаг 5: Запуск бота

В новом терминале:
```bash
python t_bot/run.py
```

## Тестирование

1. Зарегистрируйтесь на сайте http://127.0.0.1:8000
2. В профиле нажмите "Привязать Telegram"
3. Скопируйте magic-ссылку или отсканируйте QR-код
4. Перейдите по ссылке в Telegram
5. Бот должен привязать ваш аккаунт

## Команды для тестирования

- `/start` — приветствие
- `/help` — справка
- `/cards` — ваши карточки
- `/today` — карточки на сегодня
- `/progress` — прогресс
- `/say слово` — озвучка
- `/test` — тестирование

## Устранение проблем

### Бот не отвечает
- Проверьте, что токен правильный
- Убедитесь, что Django-сервер запущен
- Проверьте логи бота

### Ошибка привязки
- Убедитесь, что magic-ссылка правильная
- Проверьте, что токен не истек
- Проверьте логи Django

### Ошибки API
- Убедитесь, что Django-сервер работает на http://127.0.0.1:8000
- Проверьте, что API endpoints доступны
- Проверьте логи Django 